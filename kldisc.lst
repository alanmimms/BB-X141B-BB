KLINIK TERMINATION AND DISCONNE	MACRO M1113  14-APR-81 11:23
TABLE OF CONTENTS

     1-    2	KLDISC -- KLINIK TERMINATION TASK
     2-   43	KLDISC -- (INITILAIZATION)
     3-  140	KLDISC (CTY/TTY OUTPUT ROUTINES)
     4-  220	KLDISC -- (EVENT LOGGING)
     5-  244	KLDISC -- (LOCAL DATA)
KLINIK TERMINATION AND DISCONNE	MACRO M1113  14-APR-81 11:23  PAGE 1


      1						.TITLE	KLINIK TERMINATION AND DISCONNECT TASK
      2						.SBTTL	KLDISC -- KLINIK TERMINATION TASK
      3						.IDENT	/014230/
      4						.LIST MEB
      5					;
      6					;
      7					;
      8					;                             COPYRIGHT (C) 1975, 1978 BY
      9					;                     DIGITAL EQUIPMENT CORPORATION, MAYNARD MASS.
     10					;
     11					;       THIS SOFTWARE IS FURNISHED UNDER A LICENSE AND MAY BE  USED  AND  COPIED
     12					;       ONLY IN ACCORDANCE WITH THE TERMS OF SUCH LICENSE AND WITH THE INCLUSION
     13					;       OF THE ABOVE COPYRIGHT NOTICE.  THIS SOFTWARE OR ANY OTHER COPIES THERE-
     14					;       OF  MAY NOT BE PROVIDED OR OTHERWISE MADE AVAILABLE TO ANY OTHER PERSON.
     15					;       NO TITLE TO OR OWNERSHIP OF THE SOFTWARE IS HEREBY TRANSFERRED.
     16					;
     17					;       THE INFORMATION CONTAINED IN THIS SOFTWARE IS SUBJECT TO CHANGE  WITHOUT
     18					;       NOTICE  AND SHOULD NOT BE CONSTRUED AS A COMMITMENT BY DIGITAL EQUIPMENT
     19					;       CORPORATION.
     20					;
     21					;       DIGITAL ASSUMES NO RESPONSIBILITY FOR THE  USE  OR  RELIABILITY  OF  ITS
     22					;       SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPILED BY DIGITAL.
     23					;
     24					;
     25					;
     26					;
     27					;
     28					;
     29					;		VERSION: V14-23
     30					;
     31					;		AUTHOR:	R. BELANGER
     32					;
     33					;		DATE: 09-FEB-77
     34					;
     35					;	MODIFICATIONS:
     36					;
     37					;	NO.	DATE		PROGRAMMER	PURPOSE
     38					;	---	----		----------	-------
     39					;	001	01-JUL-77	R. BELANGER	ADD KLINIK LOGGING
     40					;	002	21-SEP-77	R. BELANGER	FIX BUG IN HANGUP CODE
     41					;  TCO 4.1.1105	11-MAR-80	R. BELANGER	CHANGE "EF.PR1" RECOGNITION
KLINIK TERMINATION AND DISCONNE	MACRO M1113  14-APR-81 11:23  PAGE 2
KLDISC -- (INITILAIZATION)

     43						.SBTTL	KLDISC -- (INITILAIZATION)
     44
     45					;+
     46					;	THIS MODULE IS REQUESTED BY THE TELETYPE DRIVER UPON KLINIK
     47					;	LINE CARRIER DROP. IT IS ALSO REQUESTED BY THE RSX20F CONSOLE
     48					;	COMMAND LANGUAGE VIA THE "DISCONNECT" COMMAND.
     49					;
     50					;	THIS TASK HAS THE RESPONSIBILTY TO:
     51					;
     52					;	1. INFORM THE CTYS OF A "CLEAR KLINIK" COMMAND
     53					;	2. INFORM THE CTYS OF A "DISCONNECT" COMMAND
     54					;	3. INFORM THE LOCAL CTY OF A KLINIK LINE CARRIER DROP
     55					;	4. DISCONNECT THE KLINIK LINE WHEN SO REQUESTED.
     56					;-
     57
     58						.MCALL	QIOW$,ALUN$,RQST$,DIR$,EXIT$S,WSIG$S,CALL,RETURN
     59						.MCALL	.ENB6,.INH6,WTSE$S,CLEF$S
     60
     61	000000				KLDISC::
     62	000000					DIR$	#ATCTY		; ATTACH THE LOCAL CTY
	000000	012746 	000760'			MOV	#ATCTY,-(SP)
	000004	104375 				EMT	375
     63	000006	016705 	000000G			MOV	KLNPTR,R5	; KLINIK LINE POINTER TO R5
     64	000012	016504 	000000G			MOV	TTYEXP(R5),R4	; EXTERNAL PAGE POINTER TO R4
     65	000016	016746 	000000G			MOV	.KLNSW,-(SP)	; +++002 SAVE THE KLINIK SWITCH WORD
     66	000022					.INH6			; DISALLOW INTERRUPTS
	000022	013746 	000000G			MOV	@#PS,-(SP)
	000026	112737 	000300 	000000G		MOVB	#300,@#PS
     67	000034	005067 	000000G			CLR	.KLNSW		;;; CLEAR THE ACTIVE FLAGS
     68	000040	042765 	000000C	000000G		BIC	#TT.CTY!TT.OUT,STSW1(R5) ;;; RESET SOFTWARE FLAGS
     69	000046	042714 	000000C			BIC	#DL.DEN!DL.REN,(R4) ;;; DISABLE THE LINE
     70	000052	042764 	000000G	000004 		BIC	#DL.XEN,4(R4)	;;; SO
     71	000060	005764 	000002 			TST	2(R4)		;;; FLUSH INPUT FLAGS
     72	000064	005065 	000000G			CLR	TTYEXP(R5)	;;; SO EXEC CAN'T MEDDLE
     73	000070					.ENB6			;;; ALLOW INTERRUPTS
	000070	012637 	000000G			MOV	(SP)+,@#PS
     74	000074	116600 	000001 			MOVB	1(SP),R0	; +++002 CALL CODE TO R0
     75	000100	003411 				BLE	UNDEF		; UNDEFINED IF .LE. 0
     76	000102	042700 	177774 			BIC	#^C3,R0		; MAKE IT MODULO 3
     77	000106	006300 				ASL	R0		; TIMES 2
     78	000110	000170 	000114'			JMP	@DISPAT(R0)	; DO IT TO IT
     79						;
     80	000114				DISPAT:
     81	000114	000216'				.WORD	DISCN		; 4 MODULO 3 -- DISCONNECT AND EXIT
     82	000116	000132'				.WORD	CLKLN		; 1 MODULO 3 -- CLEAR KLINIK - RECALL PARSER
     83	000120	000170'				.WORD	CRDRP		; 2 MODULO 3 -- REPORT CARRIER LOSS AND EXIT
     84	000122	000216'				.WORD	DISCN		; 3 MODULO 3 -- DISCONNECT - RECALL PARSER
     85						.ENABL	LSB
     86	000124				UNDEF:
     87	000124	012702 	001152'			MOV	#UNDFMS,R2	; UNDEFINED MESSAGE TO R2
     88	000130	000440 				BR	35$		; PRINT AND EXIT
     89						;
     90	000132				CLKLN:
     91	000132	012702 	001072'			MOV	#CLKLMS,R2	; CLEAR KLINIK MESSAGE TO R2
     92	000136					CALL	PRBOTH		; TELL BOTH TERMINALS
	000136	004767 	000216 			JSR	PC,PRBOTH
     93	000142					.INH6			; DISALLOW INTERRUPTS
KLINIK TERMINATION AND DISCONNE	MACRO M1113  14-APR-81 11:23  PAGE 2-1
KLDISC -- (INITILAIZATION)

	000142	013746 	000000G			MOV	@#PS,-(SP)
	000146	112737 	000300 	000000G		MOVB	#300,@#PS
     94	000154	052714 	000000C			BIS	#DL.DEN!DL.REN,(R4) ;;; REENABLE THE LINE
     95	000160	052764 	000000G	000004 		BIS	#DL.XEN,4(R4)	;;; SO
     96	000166	000452 				BR	40$		;;; AND EXIT
     97						;
     98	000170				CRDRP:
     99	000170	012700 	000004 			MOV	#4,R0		; +++001 PACKET LENGTH TO R0
    100	000174	012701 				MOV	(PC)+,R1	; +++001 MESSAGE TO R1
    101	000176	   000G	   000G			.BYTE	K.LDSC,K.LDRP	; +++001 CARRIER DROP
    102	000200					CALL	KLLOG		; +++001 LOG IT
	000200	004767 	000454 			JSR	PC,KLLOG
    103	000204	012702 	001030'			MOV	#CDMSG,R2	; CARRIER DROP MESSAGE TO R2
    104	000210					CALL	PRBOTH		; PRINT IT
	000210	004767 	000144 			JSR	PC,PRBOTH
    105	000214	000406 				BR	35$		; +++001 CONTINUE
    106						;
    107	000216				DISCN:
    108	000216	012700 	000004 			MOV	#4,R0		; +++001 PACKET LENGTH TO R0
    109	000222	012701 				MOV	(PC)+,R1	; +++001 MESSAGE TO R1
    110	000224	   000G	   000G			.BYTE	K.LDSC,K.LDCM	; +++001 DIRECTED DISCONNECT
    111	000226					CALL	KLLOG		; +++001 LOG IT
	000226	004767 	000426 			JSR	PC,KLLOG
    112	000232				35$:				; +++001
    113	000232	012702 	001221'			MOV	#DISCMS,R2	; DISCONNECT MESSAGE TO R2
    114	000236					CALL	PRBOTH		; TELL BOTH TERMINALS
	000236	004767 	000116 			JSR	PC,PRBOTH
    115	000242	105716 				TSTB	(SP)		; REMOTE KLINIK ACTIVE??
    116	000244	100006 				BPL	37$		; YES -- GO ON
    117	000246	010446 				MOV	R4,-(SP)	; NO -- MUST TELL KL
    118	000250	012701 	000000G			MOV	#BC.THU,R1	; HANGUP FUNCTION CODE TO R1
    119	000254					CALL	.STTYH		; MESSAGE TO -10 Q
	000254	004767 	000000G			JSR	PC,.STTYH
    120	000260	012604 				MOV	(SP)+,R4	; RESTORE R4
    121	000262				37$:
    122	000262					.INH6			; DISALLOW INTERRUPTS
	000262	013746 	000000G			MOV	@#PS,-(SP)
	000266	112737 	000300 	000000G		MOVB	#300,@#PS
    123	000274	012714 	000000C			MOV	#DL.DEN!DL.REN,(R4) ;;; HANG UP THE KLINIK LINE
    124	000300	012764 	000000G	000004 		MOV	#DL.XEN,4(R4)	;;; SO
    125	000306	042765 	000000C	000000G		BIC	#TT.CRW!TT.RIP,STSW1(R5) ;;; RESET CARRIER WAIT
    126	000314				40$:
    127	000314	010465 	000000G			MOV	R4,TTYEXP(R5)	;;; GIVE THE LINE BACK TO THE EXEC
    128	000320	005065 	000000G			CLR	STSW0(R5)	;;; TURN THE INPUT SIDE ON IF IT WAS OFF
    129	000324					.ENB6			;;; ALLOW INTERRUPTS
	000324	012637 	000000G			MOV	(SP)+,@#PS
    130	000330	132766 	000001 	000001 		BITB	#1,1(SP)	; +++002 MUST WE RECALL PARSER??
    131	000336	001403 				BEQ	50$		; NO -- JUST GO AWAY
    132	000340					DIR$	#RQSPAR		; YES -- CALL PARSER BACK
	000340	012746 	001012'			MOV	#RQSPAR,-(SP)
	000344	104375 				EMT	375
    133	000346				50$:
    134	000346	005726 				TST	(SP)+		; CLEAR STACK
    135	000350					EXIT$S			; AND GO AWAY
	000350	012746 				MOV	(PC)+,-(SP)
	000352	   063 	   001 			.BYTE	51.,1
	000354	104375 				EMT	375
KLINIK TERMINATION AND DISCONNE	MACRO M1113  14-APR-81 11:23  PAGE 2-2
KLDISC -- (INITILAIZATION)

    136	000356	000000 				HALT			; HELP!
    137						;
    138						.DSABL	LSB
KLINIK TERMINATION AND DISCONNE	MACRO M1113  14-APR-81 11:23  PAGE 3
KLDISC (CTY/TTY OUTPUT ROUTINES)

    140						.SBTTL	KLDISC (CTY/TTY OUTPUT ROUTINES)
    141
    142	000360				PRBOTH:
    143	000360	010246 				MOV	R2,-(SP)	; SAVE MESSAGE POINTER
    144	000362					CALL	PRCTY		; SEND IT TO THE CTY
	000362	004767 	000004 			JSR	PC,PRCTY
    145	000366	012602 				MOV	(SP)+,R2	; RETREIVE MESSAGE POINTER
    146	000370	000501 				BR	PRKLN		; SEND IT TO KLINIK
    147						;
    148	000372				PRCTY:
    149	000372	005767 	000000G			TST	.TTP11		; IS CTY HUNG UP IN I/O ?
    150	000376	001015 				BNE	90$		; YES, DON'T HANG US ALSO.
    151	000400	010200 				MOV	R2,R0		; COPY STRING POINTER
    152	000402				10$:
    153	000402	105720 				TSTB	(R0)+		; FIND END OF STRING
    154	000404	001376 				BNE	10$
    155	000406	005300 				DEC	R0		; BACK UP ONE CHAR
    156	000410	160200 				SUB	R2,R0		; AND FIGURE LENGTH.
    157	000412	010267 	000366 			MOV	R2,CTYDB+Q.IOPL+0 ;SET UP ADDRESS
    158	000416	010067 	000364 			MOV	R0,CTYDB+Q.IOPL+2 ;AND LENGTH,
    159	000422					DIR$	#CTYDB		; SEND THE MESSAGE.
	000422	012746 	000770'			MOV	#CTYDB,-(SP)
	000426	104375 				EMT	375
    160	000430	000471 				BR	PRKLX		; AND EXIT
    161	000432				90$:
    162	000432	010446 				MOV	R4,-(SP)	; SAVE R4
    163	000434	010546 				MOV	R5,-(SP)	; AND R5
    164	000436	016705 	000000G			MOV	CTYPTR,R5	; POINT TO THE CTY
    165	000442	016504 	000000G			MOV	TTYEXP(R5),R4	; I/O PAGE ADDRESS TO R4
    166	000446					.INH6			; DISALLOW INTERRUPTS
	000446	013746 	000000G			MOV	@#PS,-(SP)
	000452	112737 	000300 	000000G		MOVB	#300,@#PS
    167	000460	042714 	000000G			BIC	#DL.REN,(R4)	;;; DISABLE THE LINE
    168	000464	042764 	000000G	000004 		BIC	#DL.XEN,4(R4)	;;; SO
    169	000472	005065 	000000G			CLR	TTYEXP(R5)	;;; SO EXEC CAN'T MEDDLE
    170	000476					.ENB6			;;; ALLOW INTERRUPTS
	000476	012637 	000000G			MOV	(SP)+,@#PS
    171	000502					CALL	PRKLN		; PRINT THE LINE
	000502	004767 	000066 			JSR	PC,PRKLN
    172	000506					.INH6			; DISALLOW INTERRUPTS
	000506	013746 	000000G			MOV	@#PS,-(SP)
	000512	112737 	000300 	000000G		MOVB	#300,@#PS
    173	000520	052714 	000000G			BIS	#DL.REN,(R4)	;;; REENABLE THE LINE
    174	000524	052764 	000000G	000004 		BIS	#DL.XEN,4(R4)	;;; SO
    175	000532	010465 	000000G			MOV	R4,TTYEXP(R5)	;;; GIVE IT BACK TO THE EXEC
    176	000536					.ENB6			;;; ALLOW INTERRUPTS
	000536	012637 	000000G			MOV	(SP)+,@#PS
    177	000542	012605 				MOV	(SP)+,R5	; RESTORE REGISTERS
    178	000544	012604 				MOV	(SP)+,R4	; SO
    179	000546					RETURN			; AND GO AWAY
	000546	000207 				RTS	PC
    180						;
    181
    182	000550				PRKL0:
    183	000550					CALL	PRKLC		; SEND THE CHARACTER.
	000550	004767 	000026 			JSR	PC,PRKLC
    184	000554	122700 	000012 			CMPB	#12,R0		; IF CHARACTER WAS LF,
KLINIK TERMINATION AND DISCONNE	MACRO M1113  14-APR-81 11:23  PAGE 3-1
KLDISC (CTY/TTY OUTPUT ROUTINES)

    185	000560	001005 				BNE	PRKLN		; THEN
    186	000562	005000 				CLR	R0		; SEND TWO NULLS.
    187	000564					CALL	PRKLC
	000564	004767 	000012 			JSR	PC,PRKLC
    188	000570					CALL	PRKLC
	000570	004767 	000006 			JSR	PC,PRKLC
    189	000574				PRKLN:
    190	000574	112200 				MOVB	(R2)+,R0	; GET NEXT CHARACTER
    191	000576	001364 				BNE	PRKL0
    192	000600	000412 				BR	PRKLW		; ELSE LET PRINTER SETTLE AND EXIT
    193						;
    194
    195	000602				PRKLC:
    196	000602					CALL	PRKLW		; MAKE SURE PRINTER IS READY
	000602	004767 	000020 			JSR	PC,PRKLW
    197	000606	103402 				BCS	PRKLX		; FORGET IT IF CC-C IS SET
    198	000610	110064 	000006 			MOVB	R0,6(R4)	; AND SEND THE CHARACTER.
    199	000614				PRKLX:
    200	000614	000241 				CLC			; CLEAR CC-C
    201	000616					RETURN			; ALL FINISHED
	000616	000207 				RTS	PC
    202
    203	000620				PRKL1:
    204	000620					WSIG$S			; WAIT A TICK OR SO.
	000620	012746 				MOV	(PC)+,-(SP)
	000622	   061 	   001 			.BYTE	49.,1
	000624	104375 				EMT	375
    205	000626				PRKLW:
    206	000626	026705 	000000G			CMP	CTYPTR,R5	; IS THIS THE CTY??
    207	000632	001405 				BEQ	10$		; YES -- GO ON
    208	000634	032714 	000000G			BIT	#DL.CAR,(R4)	; NO -- IS THE CARRIER STILL THERE ?
    209	000640	001002 				BNE	10$		; YES -- GO ON
    210	000642	000261 				SEC			; NO -- SET CC-C
    211	000644	000404 				BR	20$		; AND EXIT
    212						;
    213	000646				10$:
    214	000646	105764 	000004 			TSTB	4(R4)		; IS PRINTER WAITING FOR CHAR ?
    215	000652	100362 				BPL	PRKL1		; STILL BUSY - WAIT SOME MORE.
    216	000654	000241 				CLC			; OK -- CLEAR CC-C
    217	000656				20$:
    218	000656					RETURN			; TO CALLER
	000656	000207 				RTS	PC
KLINIK TERMINATION AND DISCONNE	MACRO M1113  14-APR-81 11:23  PAGE 4
KLDISC -- (EVENT LOGGING)

    220						.SBTTL	KLDISC -- (EVENT LOGGING)
    221
    222	000660				KLLOG:				; +++001
    223	000660	010046 				MOV	R0,-(SP)	; +++001 SAVE R0
    224	000662	012700 	000752'			MOV	#LOGBUF,R0	; +++001 BUFFER POINTER TO R0
    225	000666	012620 				MOV	(SP)+,(R0)+	; +++001 SET PACKET LENGTH
    226	000670	005720 				TST	(R0)+		; +++001 GET OVER THE LOG FLAG
    227	000672	010110 				MOV	R1,(R0)		; +++001 SET THE MESSAGE
    228	000674	024040 				CMP	-(R0),-(R0)	; +++001 BACK THE POINTER UP
    229	000676	005767 	000002G			TST	.COMEF+2	; [4.1.1105] CAN ER DO THIS??
    230	000702	100022 				BPL	90$		; [4.1.1105] NO -- QUIT NOW
    231	000704					CLEF$S	#2		; +++001 YES -- CLEAR THE FLAG
	000704	012746 	000002 			MOV	#2,-(SP)
	000710	012746 				MOV	(PC)+,-(SP)
	000712	   037 	   002 			.BYTE	31.,2
	000714	104375 				EMT	375
    232	000716	012701 	100000G			MOV	#BC.HDS+100000,R1 ; +++001 FUNCTION CODE TO R1
    233	000722	012702 	000002 			MOV	#2,R2		; +++001 EVENT FLAG 2
    234	000726	012703 	000000G			MOV	#D.CKLN,R3	; +++001 DEVICE CODE TO R3
    235	000732					CALL	..STIN		; +++001 LOG IT
	000732	004767 	000000G			JSR	PC,..STIN
    236	000736					WTSE$S	#2		; +++001 WAIT FOR IT
	000736	012746 	000002 			MOV	#2,-(SP)
	000742	012746 				MOV	(PC)+,-(SP)
	000744	   051 	   002 			.BYTE	41.,2
	000746	104375 				EMT	375
    237	000750				90$:
    238	000750					RETURN
	000750	000207 				RTS	PC
    239
    240	000752				LOGBUF:
    241	000752	000000 	000000G	000000 		.WORD	0,DV.LOG,0
    242		000760'			LOGBFE=.
KLINIK TERMINATION AND DISCONNE	MACRO M1113  14-APR-81 11:23  PAGE 5
KLDISC -- (LOCAL DATA)

    244						.SBTTL	KLDISC -- (LOCAL DATA)
    245
    246	000760				ATCTY:
    247	000760					ALUN$	1,TT,0
	000760	   007 	   004 			.BYTE	7,4
	000762	000001 				.WORD	1
	000764	   124 				.ASCII	/T/
	000765	   124 				.ASCII	/T/
	000766	000000 				.WORD	0
    248	000770				CTYDB:
    249	000770					QIOW$	IO.WLB,1,1,,,,<0,0,0>
	000770	   003 	   011 			.BYTE	3,$$$ARG
	000772	000000G				.WORD	IO.WLB
	000774	000001 				.WORD	1
	000776	   001 	   000 			.BYTE	1,
	001000	000000 				.WORD
	001002	000000 				.WORD
	001004	000000 				.WORD	0
	001006	000000 				.WORD	0
	001010	000000 				.WORD	0
    250	001012				RQSPAR:
    251	001012					RQST$	PARSER,,249.
	001012	   013 	   007 			.BYTE	11.,7
	001014	062072 	073632 			.RAD50	/PARSER/
	001020	000000 	000000 			.WORD	0,0
	001024	000371 				.WORD	249.
	001026	   000 	   000 			.BYTE	,
    252	001030				CDMSG:
    253	001030	   015 	   012 	   113 		.ASCIZ	<15><12>/KLD -- KLINIK LINE CARRIER DROP/
	001033	   114 	   104 	   040
	001036	   055 	   055 	   040
	001041	   113 	   114 	   111
	001044	   116 	   111 	   113
	001047	   040 	   114 	   111
	001052	   116 	   105 	   040
	001055	   103 	   101 	   122
	001060	   122 	   111 	   105
	001063	   122 	   040 	   104
	001066	   122 	   117 	   120
	001071	   000
    254	001072				CLKLMS:
    255	001072	   015 	   012 	   113 		.ASCIZ	<15><12>/KLD -- KLINIK ACCESS TERMINATED BY OPERATOR/<15><12>
	001075	   114 	   104 	   040
	001100	   055 	   055 	   040
	001103	   113 	   114 	   111
	001106	   116 	   111 	   113
	001111	   040 	   101 	   103
	001114	   103 	   105 	   123
	001117	   123 	   040 	   124
	001122	   105 	   122 	   115
	001125	   111 	   116 	   101
	001130	   124 	   105 	   104
	001133	   040 	   102 	   131
	001136	   040 	   117 	   120
	001141	   105 	   122 	   101
	001144	   124 	   117 	   122
	001147	   015 	   012 	   000
KLINIK TERMINATION AND DISCONNE	MACRO M1113  14-APR-81 11:23  PAGE 5-1
KLDISC -- (LOCAL DATA)

    256	001152				UNDFMS:
    257	001152	   015 	   012 	   113 		.ASCII	<15><12>/KLD -- KLINIK LINE IN UNDEFINED STATE/
	001155	   114 	   104 	   040
	001160	   055 	   055 	   040
	001163	   113 	   114 	   111
	001166	   116 	   111 	   113
	001171	   040 	   114 	   111
	001174	   116 	   105 	   040
	001177	   111 	   116 	   040
	001202	   125 	   116 	   104
	001205	   105 	   106 	   111
	001210	   116 	   105 	   104
	001213	   040 	   123 	   124
	001216	   101 	   124 	   105
    258	001221				DISCMS:
    259	001221	   015 	   012 	   113 		.ASCIZ	<15><12>/KLD -- KLINIK LINE DISCONNECTED/<15><12>
	001224	   114 	   104 	   040
	001227	   055 	   055 	   040
	001232	   113 	   114 	   111
	001235	   116 	   111 	   113
	001240	   040 	   114 	   111
	001243	   116 	   105 	   040
	001246	   104 	   111 	   123
	001251	   103 	   117 	   116
	001254	   116 	   105 	   103
	001257	   124 	   105 	   104
	001262	   015 	   012 	   000
    260					.EVEN
    261		000000'			.END	KLDISC
KLINIK TERMINATION AND DISCONNE	MACRO M1113  14-APR-81 11:23  PAGE 5-2
SYMBOL TABLE

ATCTY   000760R  	DISPAT  000114R  	LOGBFE= 000760R  	Q.IOLU= 000004   	TT.CTY= ****** GX
A.LULU= 000002   	DL.CAR= ****** GX	LOGBUF  000752R  	Q.IOPL= 000014   	TT.OUT= ****** GX
A.LUNA= 000004   	DL.DEN= ****** GX	PRBOTH  000360R  	Q.IOPR= 000007   	TT.RIP= ****** GX
A.LUNU= 000006   	DL.REN= ****** GX	PRCTY   000372R  	Q.IOSB= 000010   	UNDEF   000124R
BC.HDS= ****** GX	DL.XEN= ****** GX	PRKLC   000602R  	RQSPAR  001012R  	UNDFMS  001152R
BC.THU= ****** GX	DV.LOG= ****** GX	PRKLN   000574R  	R.QSGC= 000015   	$$    = 000067
CDMSG   001030R  	D.CKLN= ****** GX	PRKLW   000626R  	R.QSPC= 000014   	$$$ARG= 000011
CLKLMS  001072R  	IO.WLB= ****** GX	PRKLX   000614R  	R.QSPN= 000006   	$$$OST= 000016
CLKLN   000132R  	KLDISC  000000RG 	PRKL0   000550R  	R.QSPR= 000012   	$$$T1 = 000000
CRDRP   000170R  	KLLOG   000660R  	PRKL1   000620R  	R.QSTN= 000002   	.COMEF= ****** GX
CTYDB   000770R  	KLNPTR= ****** GX	PS    = ****** GX	STSW0 = ****** GX	.KLNSW= ****** GX
CTYPTR= ****** GX	K.LDCM= ****** GX	Q.IOAE= 000012   	STSW1 = ****** GX	.STTYH= ****** GX
DISCMS  001221R  	K.LDRP= ****** GX	Q.IOEF= 000006   	TTYEXP= ****** GX	.TTP11= ****** GX
DISCN   000216R  	K.LDSC= ****** GX	Q.IOFN= 000002   	TT.CRW= ****** GX	..STIN= ****** GX

. ABS.	000000	   000
      	001266	   001
ERRORS DETECTED:  0

VIRTUAL MEMORY USED:  2296 WORDS  ( 9 PAGES)
DYNAMIC MEMORY:  3574 WORDS  ( 13 PAGES)
ELAPSED TIME:  00:00:13
[54,10]KLDISC,[54,20]KLDISC/-SP/CR=[54,30]KLDISC
KLDISC     CREATED BY  MACRO  ON 14-APR-81 AT 11:23	PAGE 1

SYMBOL CROSS REFERENCE                                  CREF         

SYMBOL	VALUE		REFERENCES

ATCTY 	  000760 R	 2-62      #5-246     
A.LULU	= 000002	#5-247     
A.LUNA	= 000004	#5-247     
A.LUNU	= 000006	#5-247     
BC.HDS	= ******  GX	 4-232     
BC.THU	= ******  GX	 2-118     
CDMSG 	  001030 R	 2-103     #5-252     
CLKLMS	  001072 R	 2-91      #5-254     
CLKLN 	  000132 R	 2-82      #2-90      
CRDRP 	  000170 R	 2-83      #2-98      
CTYDB 	  000770 R	*3-157     *3-158      3-159     #5-248     
CTYPTR	= ******  GX	 3-164      3-206     
DISCMS	  001221 R	 2-113     #5-258     
DISCN 	  000216 R	 2-81       2-84      #2-107     
DISPAT	  000114 R	 2-78      #2-80      
DL.CAR	= ******  GX	 3-208     
DL.DEN	= ******  GX	 2-69       2-94       2-123     
DL.REN	= ******  GX	 2-69       2-94       2-123      3-167      3-173     
DL.XEN	= ******  GX	 2-70       2-95       2-124      3-168      3-174     
DV.LOG	= ******  GX	 4-241     
D.CKLN	= ******  GX	 4-234     
IO.WLB	= ******  GX	 5-249     
KLDISC	  000000 RG	#2-61       5-261     
KLLOG 	  000660 R	 2-102      2-102      2-111      2-111     #4-222     
KLNPTR	= ******  GX	 2-63      
K.LDCM	= ******  GX	 2-110     
K.LDRP	= ******  GX	 2-101     
K.LDSC	= ******  GX	 2-101      2-110     
LOGBFE	= 000760 R	#4-242     
LOGBUF	  000752 R	 4-224     #4-240     
PRBOTH	  000360 R	 2-92       2-92       2-104      2-104      2-114      2-114     #3-142     
PRCTY 	  000372 R	 3-144      3-144     #3-148     
PRKLC 	  000602 R	 3-183      3-183      3-187      3-187      3-188      3-188     #3-195     
PRKLN 	  000574 R	 3-146      3-171      3-171      3-185     #3-189     
PRKLW 	  000626 R	 3-192      3-196      3-196     #3-205     
PRKLX 	  000614 R	 3-160      3-197     #3-199     
PRKL0 	  000550 R	#3-182      3-191     
PRKL1 	  000620 R	#3-203      3-215     
PS    	= ******  GX	 2-66      *2-66      *2-73       2-93      *2-93       2-122     *2-122     *2-129      3-166     
                        *3-166     *3-170      3-172     *3-172     *3-176     
Q.IOAE	= 000012	#5-249     
Q.IOEF	= 000006	#5-249     
Q.IOFN	= 000002	#5-249     
Q.IOLU	= 000004	#5-249     
Q.IOPL	= 000014	*3-157     *3-158     #5-249     
Q.IOPR	= 000007	#5-249     
Q.IOSB	= 000010	#5-249     
RQSPAR	  001012 R	 2-132     #5-250     
R.QSGC	= 000015	#5-251     
R.QSPC	= 000014	#5-251     
R.QSPN	= 000006	#5-251     
R.QSPR	= 000012	#5-251     
KLDISC     CREATED BY  MACRO  ON 14-APR-81 AT 11:23	PAGE 2

SYMBOL CROSS REFERENCE                                  CREF         

SYMBOL	VALUE		REFERENCES

R.QSTN	= 000002	#5-251     
STSW0 	= ******  GX	*2-128     
STSW1 	= ******  GX	*2-68      *2-125     
TTYEXP	= ******  GX	 2-64      *2-72      *2-127      3-165     *3-169     *3-175     
TT.CRW	= ******  GX	 2-125     
TT.CTY	= ******  GX	 2-68      
TT.OUT	= ******  GX	 2-68      
TT.RIP	= ******  GX	 2-125     
UNDEF 	  000124 R	 2-75      #2-86      
UNDFMS	  001152 R	 2-87      #5-256     
$$    	= 000067	#2-92       2-92      #2-102      2-102     #2-104      2-104     #2-111      2-111     #2-114     
                         2-114     #2-119      2-119     #3-144      3-144     #3-171      3-171     #3-183      3-183     
                        #3-187      3-187     #3-188      3-188     #3-196      3-196     #4-235      4-235     
$$$ARG	= 000011	#5-247      5-247     #5-247      5-247     #5-247      5-247     #5-249      5-249     #5-249     
                         5-249     #5-249      5-249     #5-249      5-249     
$$$GLB	= ******	 5-247      5-247      5-247      5-247      5-249      5-249      5-249      5-249      5-249     
                         5-249      5-249      5-249      5-251      5-251      5-251      5-251      5-251      5-251     
$$$OST	= 000016	#5-247      5-247      5-247     #5-247      5-247      5-247     #5-247      5-247      5-247     
                        #5-247     #5-249      5-249      5-249     #5-249      5-249      5-249     #5-249      5-249     
                         5-249     #5-249      5-249      5-249     #5-249      5-249      5-249     #5-249      5-249     
                         5-249     #5-249      5-249     #5-251      5-251      5-251     #5-251      5-251      5-251     
                        #5-251      5-251      5-251     #5-251      5-251      5-251     #5-251      5-251      5-251     
                        #5-251     
$$$T1 	= 000000	#5-247      5-247      5-247     #5-247      5-247      5-247     #5-247      5-247      5-247     
                        #5-251      5-251      5-251      5-251     #5-251      5-251     
.COMEF	= ******  GX	 4-229     
.KLNSW	= ******  GX	 2-65      *2-67      
.STTYH	= ******  GX	 2-119      2-119     
.TTP11	= ******  GX	 3-149     
..STIN	= ******  GX	 4-235      4-235     
KLDISC     CREATED BY  MACRO  ON 14-APR-81 AT 11:23	PAGE 3

MACRO CROSS REFERENCE                                   CREF         

MACRO NAME	REFERENCES

ALUN$ 		#2-58       5-247     
CALL  		#2-58       2-92       2-102      2-104      2-111      2-114      2-119      3-144      3-171      3-183     
                 3-187      3-188      3-196      4-235     
CLEF$S		#2-59       4-231     
DIR$  		#2-58      #2-62      #2-132     #2-135     #2-135     #3-159     #3-204     #3-204     #4-231     #4-231     
                #4-236     #4-236     
ERR$  		#2-62      #2-132     #2-135     #3-159     #3-204     #4-231     #4-236     
EXIT$S		#2-58      #2-135     
MOV$  		#4-231     #4-231     #4-236     #4-236     
NBL$  		#5-247     #5-247     
OFF$  		#5-247     #5-247     #5-247     #5-247     #5-247     #5-249     #5-249     #5-249     #5-249     #5-249     
                #5-249     #5-249     #5-249     #5-249     #5-251     #5-251     #5-251     #5-251     #5-251     #5-251     
                #5-251     
QDPB$ 		#5-249      5-249     
QIOW$ 		#2-58      #5-249     
RETURN		#2-58       3-179      3-201      3-218      4-238     
RQST$ 		#2-58       5-251     
R50$  		#5-251      5-251      5-251     
WSIG$S		#2-58      #3-204     
WTSE$S		#2-59       4-236     
.ENB6 		#2-59       2-73       2-129      3-170      3-176     
.INH6 		#2-59      #2-66      #2-93      #2-122     #3-166     #3-172     
